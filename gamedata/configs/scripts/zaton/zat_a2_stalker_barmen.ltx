[logic@zat_a2_stalker_barmen]
suitable = {=check_npc_name(zat_a2_stalker_barmen)} true, {=check_npc_barman} true
trade = items\trade\trade_generic_barman.ltx
prior = 200
active = animpoint@bar
can_select_weapon = {=is_warfare} true, false
level_spot = barman
dont_keep_items = true

[animpoint@bar]
cover_name = zat_a2_sc_barmen
avail_animations = animpoint_stay_table_no_rnd
use_camp = false
meet = meet
on_info = {+zat_b14_stalker_change_smart -zat_b14_cut_scene_1_point_03} remark@wait
on_info2 = {+zat_b29_rival_sound_played} remark@b29_get_af
;on_info3 = {!npc_in_zone(zat_a2_sr_barmen)} %=teleport_npc(zat_stalker_base_smart_spawn_barmen)%
out_restr = zat_a2_sr_noweap
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
on_info1 = {=obj_on_job(zat_stalker_base_smart:zat_stalker_base_smart_beh_trade_1) =job_on_point(zat_stalker_base_smart:zat_stalker_base_smart_beh_trade_1:1:2:false)} %=trade_job_give_id(zat_stalker_base_smart:zat_stalker_base_smart_beh_trade_1)%

[meet]
close_snd_hello = {-zat_b30_barmen_under_sultan} zat_a2_stalker_barmen_greeting, zat_a2_stalker_barmen_greeting_angry
close_snd_bye = {-zat_b30_barmen_under_sultan} zat_a2_stalker_barmen_farewell, zat_a2_stalker_barmen_farewell_angry
close_anim 		= nil
close_victim 	= nil
far_anim 		= nil
far_victim 		= nil
close_distance  = 0
far_distance 	= 0
close_snd_distance = 3
abuse           = false
use = {=actor_enemy} false, true
allow_break = false
meet_on_talking = false
meet_on_talking = false
trade_enable = false	;


;Сцена в баре
[remark@wait]
target = story | zat_b14_stalker_1
anim = ward_noweap
on_info = {+zat_b14_cut_scene_1_point_01} remark@zat_b14_scene_1_stalker_bye
meet = no_meet
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
out_restr = zat_a2_sr_noweap
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false

[remark@zat_b14_scene_1_stalker_bye]
target = story | zat_b14_stalker_1
anim = ward_noweap
on_info = %=play_sound(zat_b14_scene_1_linker_reply)%
on_info2 = {-zat_b14_cut_scene_linker_have_artefact} %=spawn_item_to_npc(af_quest_b14_twisted) =seize_money_to_npc(1000) +zat_b14_cut_scene_linker_have_artefact%
snd_anim_sync = true
on_signal = sound_end | remark@wait_2 %+zat_b14_cut_scene_1_point_02%
meet = no_meet
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false

[remark@wait_2]
target = story | zat_b14_stalker_1
anim = ward_noweap
on_info = {+zat_b14_cut_scene_1_point_03} animpoint@bar
meet = no_meet
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
out_restr = zat_a2_sr_noweap
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false

;Ношение артефактов

[remark@b29_get_af]
target = job | zat_b29_stalker_rival, zat_stalker_base_smart
anim = zat_b14_give_artefact_act
on_info = {-zat_b29_linker_take_af_from_rival} %=play_sound(zat_a2_linker_b29_take_order)%
on_signal = sound_end | %+zat_b29_linker_take_af_from_rival -zat_b29_rival_sound_played%
on_info2 = {+zat_b29_stalker_rival_1_found_af +zat_b29_linker_take_af_from_rival +zat_b29_adv_task_given +zat_b29_exclusive_conditions} animpoint@bar %=relocate_item_b29(zat_b29_stalker_rival_1:zat_a2_stalker_barmen)%
on_info3 = {+zat_b29_stalker_rival_2_found_af +zat_b29_linker_take_af_from_rival +zat_b29_adv_task_given +zat_b29_exclusive_conditions} animpoint@bar %=relocate_item_b29(zat_b29_stalker_rival_2:zat_a2_stalker_barmen)%
on_info4 = {+zat_b29_stalker_rival_1_found_af +zat_b29_linker_take_af_from_rival +zat_b29_adv_task_given -zat_b29_exclusive_conditions} animpoint@bar %=relocate_item_b29(zat_b29_stalker_rival_default_1:zat_a2_stalker_barmen)%
on_info5 = {+zat_b29_stalker_rival_2_found_af +zat_b29_linker_take_af_from_rival +zat_b29_adv_task_given -zat_b29_exclusive_conditions} animpoint@bar %=relocate_item_b29(zat_b29_stalker_rival_default_2:zat_a2_stalker_barmen)%
on_info6 = {-zat_b29_adv_task_given} animpoint@bar %-zat_b29_rival_sound_played%
meet = no_meet
combat_ignore_cond = {=is_warfare} false, {=actor_true_enemy =check_enemy_name(actor)} false, true
combat_ignore_keep_when_attacked = {=is_warfare} false, true
invulnerable = {=is_warfare} false, {!actor_true_enemy} true, false
out_restr = zat_a2_sr_noweap
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
