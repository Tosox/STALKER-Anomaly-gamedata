[logic]
active = sr_idle@check_story

[sr_idle@check_story]
on_info = {+story_mode_disabled} sr_idle@nil, sr_psy_antenna@good_psy_helmet

[sr_psy_antenna@no_helmet]
eff_intensity = 100
hit_intensity = 100
postprocess = psy_antenna_indoor.ppe
on_info = {=actor_has_item(good_psy_helmet)} sr_psy_antenna@good_psy_helmet, {=actor_has_item(bad_psy_helmet)} sr_psy_antenna@bad_psy_helmet
on_info2 = {=actor_community(actor_monolith)} sr_idle@nil, {+yantar_attack_start} sr_idle@nil

[sr_psy_antenna@bad_psy_helmet]
eff_intensity = 100
hit_intensity = 0.2
postprocess = psy_antenna_indoor.ppe
on_info = {=actor_has_item(good_psy_helmet)} sr_psy_antenna@good_psy_helmet, {=actor_has_item(bad_psy_helmet)}, sr_psy_antenna@no_helmet
on_info2 = {=actor_community(actor_monolith)} sr_idle@nil, {+yantar_attack_start} sr_idle@nil

[sr_psy_antenna@good_psy_helmet]
eff_intensity = 100
hit_intensity = 0
postprocess = psy_antenna_indoor.ppe
on_info = {=actor_has_item(good_psy_helmet)}, {=actor_has_item(bad_psy_helmet)} sr_psy_antenna@bad_psy_helmet, sr_psy_antenna@no_helmet
on_info2 = {=actor_community(actor_monolith)} sr_idle@nil, {+yantar_attack_start} sr_idle@nil

[sr_idle@nil]